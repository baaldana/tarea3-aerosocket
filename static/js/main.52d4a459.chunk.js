(this["webpackJsonptarea3-aerosocket"]=this["webpackJsonptarea3-aerosocket"]||[]).push([[0],{48:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),i=n(21),r=n.n(i),s=(n(48),n.p,n(0)),a=function(e){var t=e.color,n=e.text,c=e.onClick;return Object(s.jsx)("button",{onClick:c,style:{backgroundColor:t},className:"btn",children:n})};a.defaultProps={color:"steelblue",text:"Sample Text"};var j=a,l=function(e){return Object(s.jsx)("header",{className:"header",children:Object(s.jsx)("h1",{children:"Aerosocket"})})},b=n(14),u=n(2),O=n(43),d=n.n(O)()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),h=function(e){e.nombre;var t=Object(c.useState)([]),n=Object(u.a)(t,2),o=n[0],i=n[1],r=Object(c.useRef)(null);return Object(c.useEffect)((function(){return d.on("CHAT",(function(e){console.log("cambiando log chat"),i((function(t){return[].concat(Object(b.a)(t),[e])}))})),function(){}}),[]),Object(s.jsxs)("div",{className:"chat_log",children:[o.map((function(e,t){return Object(s.jsxs)("div",{children:[" ",new Date(e.date).toLocaleString("es-CL")," | ",e.name,": ",e.message]},t)})),Object(s.jsx)("div",{ref:r})]})},x=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)(""),r=Object(u.a)(i,2),a=r[0],l=r[1],b=Object(c.useState)(!1),O=Object(u.a)(b,2),h=O[0],x=O[1];return Object(s.jsxs)("div",{children:[!h&&Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==a&&x(!0)},children:[Object(s.jsx)("label",{htmlFor:"",children:"Escribe tu nombre:"}),Object(s.jsx)("input",{value:a,onChange:function(e){return l(e.target.value)}}),Object(s.jsx)(j,{color:"gray",text:"Ir al chat"})]}),h&&Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d.emit("CHAT",{name:a,message:n}),console.log("envi\xe9 un mensaje"),o("")},children:[Object(s.jsx)("label",{htmlFor:"",children:"Escribe tu mensaje"}),Object(s.jsx)("textarea",{name:"",id:"",cols:"30",rows:"1",value:n,onChange:function(e){return o(e.target.value)}}),Object(s.jsx)(j,{text:"Enviar mensaje"})]})]})},f=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1];Object(c.useEffect)((function(){return d.on("FLIGHTS",(function(e){console.log("Recibiendo FLIGHTS"),o(e)})),function(){}}),[]);return Object(s.jsx)("div",{className:"flights_container",children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Pidiendo FLIGHTS"),d.emit("FLIGHTS",{})},children:[Object(s.jsx)(j,{text:"Info de Vuelos"}),n.length>0&&Object(s.jsxs)("table",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"C\xf3digo"}),Object(s.jsx)("th",{children:"Aerol\xednea"}),Object(s.jsx)("th",{children:"Origen"}),Object(s.jsx)("th",{children:"Destino"}),Object(s.jsx)("th",{children:"Modelo"}),Object(s.jsx)("th",{children:"Num Asientos"}),Object(s.jsx)("th",{children:"Pasajeros "})]}),n.map((function(e,t){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.code}),Object(s.jsx)("td",{children:e.airline}),Object(s.jsx)("td",{children:e.origin}),Object(s.jsx)("td",{children:e.destination}),Object(s.jsx)("td",{children:e.plane}),Object(s.jsx)("td",{children:e.seats}),Object(s.jsx)("td",{children:Object(s.jsx)("ul",{children:e.passengers.map((function(e,t){return Object(s.jsxs)("li",{children:[e.name," - ",e.age," a\xf1os."]})}))})})]},t)}))]})]})})},p=n(3),m=n(83),g=n(87),v=n(84),S=n(85),k=n(86),I=n(4),T=n.n(I),F=function(){var e=Object(c.useState)({}),t=Object(u.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)({}),r=Object(u.a)(i,2),a=r[0],l=r[1],O=Object(c.useState)([]),h=Object(u.a)(O,2),x=h[0],f=h[1],I=Object(c.useState)(!1),F=Object(u.a)(I,2),w=F[0],C=F[1],L=Object(c.useState)(!1),N=Object(u.a)(L,2),y=N[0],H=N[1],P=Object(c.useState)(!1),A=Object(u.a)(P,2),E=(A[0],A[1]),D=[{color:"black"},{color:"lime"},{color:"yellow"},{color:"purple"},{color:"red"},{color:"blue"},{color:"white"},{color:"gray"},{color:"orange"},{color:"pink"}];Object(c.useEffect)((function(){return d.on("FLIGHTS",(function(e){console.log("Recibiendo FLIGHTS en MapView"),f(e)})),function(){}}),[]),Object(c.useEffect)((function(){return d.on("POSITION",(function(e){console.log("Recibiendo ubicacion actual del vuelo ",e.code);var t={};t[e.code]=e.position,o((function(e){return Object(p.a)(Object(p.a)({},e),t)})),H(!0)})),function(){}}),[]),Object(c.useEffect)((function(){return d.on("POSITION",(function(e){var t={};l((function(n){if(n.hasOwnProperty(e.code)){if(e.position in Object(b.a)(n[e.code])){var c=Object(p.a)({},n);return c[e.code]=void 0,c}t[e.code]=[].concat(Object(b.a)(n[e.code]),[e.position])}else t[e.code]=[e.position];return Object(p.a)(Object(p.a)({},n),t)})),E(!0)})),function(){}}),[]);var G=T.a.icon({iconUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7d/Plane_icon.svg/1200px-Plane_icon.svg.png",iconSize:[20,20],rotationAngle:45});return Object(s.jsxs)("div",{className:"map_container",children:[!w&&Object(s.jsx)("form",{onSubmit:function(e){e.preventDefault(),d.emit("FLIGHTS",{}),C(!0)},children:Object(s.jsx)(j,{text:"Activar el mapa"})}),w&&Object(s.jsxs)(m.a,{center:[-32,-70],zoom:4,scrollWheelZoom:!1,children:[Object(s.jsx)(g.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),x.map((function(e){return Object(s.jsx)(v.a,{color:"black",position:e.origin,children:Object(s.jsxs)(S.a,{children:["Origen de ",e.code]})})})),x.map((function(e){return Object(s.jsx)(v.a,{position:e.destination,children:Object(s.jsxs)(S.a,{children:["Destino de ",e.code]})})})),x.map((function(e,t){return Object(s.jsx)(k.a,{pathOptions:D[6],positions:[e.origin,e.destination]})})),y&&Object.keys(n).map((function(e,t){return Object(s.jsx)(v.a,{position:n[e],icon:G,children:Object(s.jsxs)(S.a,{children:["Vuelo ",e]})})})),y&&Object.keys(a).map((function(e,t){return Object(s.jsx)(k.a,{pathOptions:D[t],positions:Object(b.a)(a[e])})}))]})]})};var w=function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(l,{}),Object(s.jsxs)("main",{children:[Object(s.jsxs)("div",{className:"big_container",children:[Object(s.jsx)(F,{}),Object(s.jsxs)("div",{className:"chat_container",children:[Object(s.jsx)(h,{}),Object(s.jsx)(x,{})]})]}),Object(s.jsx)(f,{})]}),Object(s.jsx)("h3",{children:"Hecho por Benjamin Aldana"})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,88)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),i(e),r(e)}))};r.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root")),C()}},[[81,1,2]]]);
//# sourceMappingURL=main.52d4a459.chunk.js.map